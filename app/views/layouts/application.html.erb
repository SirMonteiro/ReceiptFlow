<!DOCTYPE html>
<html>
  <head>
    <title>Receiptflow</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  
    <style>
  /* General Body Styles */
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #f4f7f6;
    color: #333;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
  }

  /* The main container for our form */
  .upload-container {
    background-color: white;
    padding: 2rem 3rem;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    text-align: center;
    width: 100%;
    max-width: 450px;
  }

  /* Style for the heading */
  .upload-container h1 {
    margin-bottom: 1.5rem;
    color: #2c3e50;
  }
  
  /* The magic: Hide the default file input */
  #file_upload_input {
    display: none;
  }

  /* Style the label to look like our custom button */
  .file-upload-label {
    display: inline-block;
    padding: 12px 25px;
    background-color: #3498db;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s ease-in-out;
  }
  
  .file-upload-label:hover {
    background-color: #2980b9;
  }
  
  /* Style for the text that shows the chosen filename */
  #file-name-display {
    margin-top: 1rem;
    color: #555;
    font-style: italic;
    min-height: 20px; /* Prevents layout jump */
  }

  /* Style the actual submit button */
  .submit-btn {
    margin-top: 1.5rem;
    width: 100%;
    padding: 12px;
    background-color: #2ecc71;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
  }

  .submit-btn:hover {
    background-color: #27ae60;
  }
</style>
    </head>

  <body>
    <style>
    /* --- NEW FLASH MESSAGE STYLES --- */
    .flash-notice {
      /* Positioning */
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
    
      /* Appearance */
      display: flex;
      align-items: center;
      padding: 12px 20px;
      background-color: #2c3e50; /* Darker, more modern background */
      color: white;
      border-radius: 50px; /* Pill shape */
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      
      /* Animation */
      animation: fadeInOut 4s ease-in-out forwards;
    }
    
    /* --- KEYFRAMES FOR THE ANIMATION --- */
    @keyframes fadeInOut {
      0% { 
        opacity: 0; 
        transform: translate(-50%, -20px);
      }
      15%, 85% { 
        opacity: 1; 
        transform: translate(-50%, 0);
      }
      100% { 
        opacity: 0; 
        transform: translate(-50%, -20px);
      }
    }
    </style>

    <% if notice %>
    <div class="flash-notice">
      <%# This is an inline SVG for the checkmark icon %>
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 10px;">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <%= notice %>
    </div>
  <% end %>
    <% if alert %>
      <p class="flash-alert"><%= alert %></p>
    <% end %>

    <%= yield %>
  </body>
</html>